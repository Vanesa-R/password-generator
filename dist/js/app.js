const section=document.querySelector(".generated__password"),passGenerated=document.querySelector(".password__text"),copyPass=document.querySelector(".password__copy"),passLength=document.querySelector(".characters"),rangeBar=document.querySelector(".range"),checkboxes=document.querySelectorAll("input[type=checkbox]"),passStrength=document.querySelector(".level__text"),level=document.querySelectorAll(".level"),btnGenerate=document.querySelector(".btn--generate"),percentage=document.documentElement.style,charactersIncluded={includeUppercase:!0,includeLowercase:!0,includeNumbers:!0,includeSymbols:!0};btnGenerate.addEventListener("click",(e=>{e.preventDefault(),generatePassword(),strenghtPassword()})),copyPass.addEventListener("click",(()=>{""!==passGenerated.value&&(navigator.clipboard.writeText(passGenerated.value),navigator.clipboard.writeText(passGenerated.value)&&setMessage("input--copied","Copied!"),window.outerWidth<450&&copyPass.classList.add("img--hidden"))}));const enabledGenerate=()=>{btnGenerate.disabled=!1,copyPass.disabled=!1,btnGenerate.setAttribute("aria-disabled","false")},disabledGenerate=()=>{btnGenerate.disabled=!0,btnGenerate.setAttribute("aria-disabled","true"),setMessage("input--empty","Generate password")},setRange=()=>{percentage.setProperty("--percentage","60%"),rangeBar.addEventListener("input",(e=>{percentage.setProperty("--percentage",5*rangeBar.value+"%"),passLength.textContent=`${rangeBar.value}`,generatePassword(),strenghtPassword()}))};percentage.setProperty("--percentage","60%"),rangeBar.addEventListener("input",(e=>{percentage.setProperty("--percentage",5*rangeBar.value+"%"),passLength.textContent=`${rangeBar.value}`,generatePassword(),strenghtPassword()}));const setIncludes=()=>{checkboxes.forEach((e=>{e.addEventListener("change",(t=>{switch(e.hasAttribute("checked")?e.removeAttribute("checked"):e.setAttribute("checked","checked"),e.setAttribute("aria-checked",t.target.checked),e.getAttribute("name")){case"uppercase":charactersIncluded.includeUppercase=t.target.checked;break;case"lowercase":charactersIncluded.includeLowercase=t.target.checked;break;case"numbers":charactersIncluded.includeNumbers=t.target.checked;break;case"symbols":charactersIncluded.includeSymbols=t.target.checked}generatePassword(),strenghtPassword()}))}))};checkboxes.forEach((e=>{e.addEventListener("change",(t=>{switch(e.hasAttribute("checked")?e.removeAttribute("checked"):e.setAttribute("checked","checked"),e.setAttribute("aria-checked",t.target.checked),e.getAttribute("name")){case"uppercase":charactersIncluded.includeUppercase=t.target.checked;break;case"lowercase":charactersIncluded.includeLowercase=t.target.checked;break;case"numbers":charactersIncluded.includeNumbers=t.target.checked;break;case"symbols":charactersIncluded.includeSymbols=t.target.checked}generatePassword(),strenghtPassword()}))}));const setMessage=(e,t)=>{const a=document.createElement("span");if(!document.querySelector(".input--empty"))if(a.classList.add(e),a.textContent=t,section.appendChild(a),""!=passGenerated.value)setTimeout((()=>{window.outerWidth<450&&copyPass.classList.remove("img--hidden"),a.remove()}),1500);else{new MutationObserver((function(e){e.forEach((e=>{"disabled"==e.attributeName&&!e.target.disabled&&a.remove()}))})).observe(btnGenerate,{attributes:!0})}},getCharacters=(e,t)=>{let a=[];for(let r=e;r<=t;r++)a.push(r);return a},uppercases=getCharacters(65,90),lowercases=getCharacters(97,122),numbers=getCharacters(48,57),symbols=getCharacters(33,47).concat(getCharacters(58,64)).concat(getCharacters(123,126)),generatePassword=()=>{let e=[],t=[];if(1==charactersIncluded.includeUppercase&&e.push(uppercases),1==charactersIncluded.includeLowercase&&e.push(lowercases),1==charactersIncluded.includeNumbers&&e.push(numbers),1==charactersIncluded.includeSymbols&&e.push(symbols),e.length>0){e=e.join(",").split(",");for(let a=0;a<rangeBar.value;a++){let a=e[Math.floor(Math.random()*e.length)];t.push(String.fromCharCode(a))}}passGenerated.value=`${t.join("")}`,""==passGenerated.value?(btnGenerate.disabled=!0,btnGenerate.setAttribute("aria-disabled","true"),setMessage("input--empty","Generate password")):(btnGenerate.disabled=!1,copyPass.disabled=!1,btnGenerate.setAttribute("aria-disabled","false"))};generatePassword();const strenghtPassword=()=>{let e=zxcvbn(`${passGenerated.value}`);switch(level.forEach(((t,a)=>{if(a<e.score&&t.classList.add(`level--${e.score}`),a+1!==e.score){let e=a+1;level.forEach((t=>{t.classList.contains(`level--${e}`)&&t.classList.remove(`level--${e}`)}))}})),e.score){case 1:passStrength.textContent="Too weak!";break;case 2:passStrength.textContent="Weak";break;case 3:passStrength.textContent="Medium";break;case 4:passStrength.textContent="Strong";break;default:passStrength.textContent=""}};strenghtPassword();